# Library Management System

·ª®ng d·ª•ng "Library Management System" l√† m·ªôt h·ªá th·ªëng qu·∫£n l√Ω th∆∞ vi·ªán ƒë∆°n gi·∫£n, ph√°t tri·ªÉn b·∫±ng JavaFX v√† JDBC. ·ª®ng d·ª•ng cho ph√©p:

* Qu·∫£n l√Ω s√°ch (Book)
* Qu·∫£n l√Ω ng∆∞·ªùi d√πng (Admin, Borrower)
* Qu·∫£n l√Ω quy tr√¨nh m∆∞·ª£n v√† tr·∫£ s√°ch
* T√¨m ki·∫øm v√† l·ªçc s√°ch theo ti√™u ch√≠
* ƒêƒÉng nh·∫≠p v√† ph√¢n quy·ªÅn truy c·∫≠p

üé• [Video demo t·∫°i ƒë√¢y](https://drive.google.com/file/d/1y4RpsajR0VMDMfeS4yOHmpx1mqy7TD5U/view?usp=sharing)
---

## 1. C√¥ng ngh·ªá s·ª≠ d·ª•ng

* **Java 8+**
* **JavaFX 8.8.3**: Giao di·ªán ng∆∞·ªùi d√πng
* **JDBC**: K·∫øt n·ªëi v√† thao t√°c v·ªõi c∆° s·ªü d·ªØ li·ªáu MySQL
* **Maven**: Qu·∫£n l√Ω c√°c th∆∞ vi·ªán

---

## 2. Ki·∫øn tr√∫c ·ª©ng d·ª•ng
![S∆° ƒë·ªì h·ªá th·ªëng](res/Library_Management_System_Class_Diagram.drawio.png)
1. **Entities** (POJOs): `Book`, `Person` (abstract), `Admin`, `Borrower`, `BorrowRecord`.
2. **DAO Layer** (Data Access Object):

   * Interface generic `Dao<T,K>` v√† c√°c con: `BookDao`, `UserDao`, `BorrowRecordDao`.
   * Implementation: `BookDaoImpl`, `UserDaoImpl`, `BorrowRecordDaoImpl`, s·ª≠ d·ª•ng `ConnectorDB` ƒë·ªÉ l·∫•y k·∫øt n·ªëi JDBC.
3. **Service Layer**:

   * `AuthService`: ƒêƒÉng nh·∫≠p, ph√¢n quy·ªÅn.
   * `UserService`: CRUD ng∆∞·ªùi d√πng.
   * `BookService`: CRUD v√† t√¨m ki·∫øm s√°ch.
   * `BorrowService`: X·ª≠ l√Ω nghi·ªáp v·ª• m∆∞·ª£n/tr·∫£ s√°ch.
4. **UI Layer** (JavaFX Controllers):

   * `LoginScreen`: M√†n h√¨nh ƒëƒÉng nh·∫≠p, ph√¢n h∆∞·ªõng ƒë·∫øn dashboard ph√π h·ª£p.
   * `AdminDashboard`: Qu·∫£n l√Ω s√°ch, ng∆∞·ªùi d√πng, m∆∞·ª£n/tr·∫£.
   * `BorrowerDashboard`: Cho ng∆∞·ªùi m∆∞·ª£n: t√¨m s√°ch, m∆∞·ª£n, xem l·ªãch s·ª≠.
5. **·ª®ng d·ª•ng kh·ªüi ch·∫°y**:

   * `LibraryManagementMain` extends `Application`: t·∫°o `Stage`, hi·ªÉn th·ªã `LoginScreen`.

---

## 3. C√°c ch·ª©c nƒÉng ch√≠nh
### 3.1. ƒêƒÉng nh·∫≠p & Ph√¢n quy·ªÅn
![Giao di·ªán ƒëƒÉng nh·∫≠p](res/demo1.PNG)
* Ng∆∞·ªùi d√πng m·ªü ·ª©ng d·ª•ng, nh·∫≠p `username` v√† `password`.
* `AuthService` ki·ªÉm tra th√¥ng tin v√† x√°c ƒë·ªãnh vai tr√≤:

  * **Admin**: truy c·∫≠p AdminDashboard.
  * **Borrower**: truy c·∫≠p BorrowerDashboard.

### 3.2. Qu·∫£n l√Ω S√°ch (Admin)
![Giao di·ªán qu·∫£n l√Ω s√°ch c·ªßa Admin](res/demo2.PNG)
* **Th√™m s√°ch m·ªõi**: Nh·∫≠p th√¥ng tin (t√°c gi·∫£, ti√™u ƒë·ªÅ, ISBN, ...) v√† l∆∞u v√†o CSDL.
* **S·ª≠a / X√≥a s√°ch**: C·∫≠p nh·∫≠t ho·∫∑c xo√° b·∫£n ghi s√°ch.
* **T√¨m ki·∫øm s√°ch**: Theo m√£ ISBN c·ªßa s√°ch.
* **Hi·ªÉn th·ªã danh s√°ch s√°ch**: TableView li·ªát k√™ t·∫•t c·∫£ s√°ch.

### 3.3. Qu·∫£n l√Ω Ng∆∞·ªùi d√πng (Admin)
![Giao di·ªán qu·∫£n l√Ω ng∆∞·ªùi d√πng c·ªßa Admin](res/demo3.PNG)
* **Th√™m / S·ª≠a / X√≥a ng∆∞·ªùi d√πng**: Ph√¢n quy·ªÅn Admin ho·∫∑c Borrower.
* **Xem danh s√°ch ng∆∞·ªùi d√πng**: TableView hi·ªÉn th·ªã c√°c th√¥ng tin c∆° b·∫£n.

### 3.4. Qu·∫£n l√Ω M∆∞·ª£n - Tr·∫£ S√°ch

#### 3.4.1. M∆∞·ª£n s√°ch
![Giao di·ªán m∆∞·ª£n/tr·∫£ c·ªßa ng∆∞·ªùi d√πng (Borrower)](res/demo4.PNG)
* Ng∆∞·ªùi d√πng (`Borrower`) ch·ªçn s√°ch theo m√£ ISBN.
* `BorrowService` ki·ªÉm tra s√°ch t·ªìn t·∫°i v√† t·∫°o `BorrowRecord` m·ªõi.

#### 3.4.2. Tr·∫£ s√°ch

* Borrower ch·ªçn b·∫£n ghi m∆∞·ª£n ch∆∞a tr·∫£.
* `BorrowService` c·∫≠p nh·∫≠t `returnDate` v√† gi·∫£m gi√° tr·ªã trong map `borrowed`.

#### 3.4.3. Xem l·ªãch s·ª≠ m∆∞·ª£n
![Giao di·ªán xem l·ªãch s·ª≠ m∆∞·ª£n/tr·∫£ c·ªßa ng∆∞·ªùi d√πng (Borrower)](res/demo5.PNG)
* **BorrowerDashboard** hi·ªÉn th·ªã danh s√°ch `BorrowRecord` (ƒëang m∆∞·ª£n v√† ƒë√£ tr·∫£).
* **AdminDashboard** c√≥ th·ªÉ xem c√°c b·∫£n ghi c·ªßa b·∫•t k·ª≥ ng∆∞·ªùi d√πng n√†o.

---

## 4. Ng∆∞·ªùi d√πng (User Roles)

1. **Admin**

   * Vai tr√≤: Qu·∫£n tr·ªã vi√™n h·ªá th·ªëng.
   * Quy·ªÅn h·∫°n:

     * To√†n quy·ªÅn CRUD s√°ch v√† ng∆∞·ªùi d√πng.

2. **Borrower**

   * Vai tr√≤: Ng∆∞·ªùi m∆∞·ª£n s√°ch.
   * Quy·ªÅn h·∫°n:

     * Xem danh s√°ch c√°c s√°ch c√≥ s·∫µn.
     * T√¨m ki·∫øm s√°ch theo ti√™u ƒë·ªÅ/t√°c gi·∫£.
     * M∆∞·ª£n v√† tr·∫£ s√°ch theo m√£ IBSN.
     * Xem l·ªãch s·ª≠ m∆∞·ª£n c√° nh√¢n.

---

## 5. C√†i ƒë·∫∑t & Ch·∫°y ·ª©ng d·ª•ng

1. **Thi·∫øt l·∫≠p CSDL**:
   * S·ª≠ d·ª•ng c∆° s·ªü d·ªØ li·ªáu s√°ch [GoodRead 100k quy·ªÉn](https://www.kaggle.com/datasets/mdhamani/goodreads-books-100k)
   * T·∫°o database MySQL, import c·∫•u tr√∫c b·∫£ng theo file `Database schema.txt`.
   * C·∫•u h√¨nh k·∫øt n·ªëi trong `ConnectorDB.java` (URL, user, password).
2. **Build & Run**:

   ```bash
   mvn clean install
   mvn javafx:run
   ```

   ho·∫∑c ch·∫°y tr·ª±c ti·∫øp `LibraryManagementMain` trong IDE.

---

## 6. Unit Tests

D·ª± √°n bao g·ªìm hai l·ªõp ki·ªÉm th·ª≠ ch√≠nh n·∫±m trong th∆∞ m·ª•c `src/test/java`:

### 6.1. `BookServiceTest.java`

* **M·ª•c ƒë√≠ch**: X√°c nh·∫≠n c√°c ph∆∞∆°ng th·ª©c trong `BookService` ho·∫°t ƒë·ªông ƒë√∫ng.
* **C√°c Test Case ch√≠nh**:

*  6.1.1. **testAddBookSuccess**: Ki·ªÉm tra khi th√™m m·ªôt `Book` h·ª£p l·ªá, g·ªçi `BookDao.save()` ƒë∆∞·ª£c th·ª±c thi v√† tr·∫£ v·ªÅ `true`.
*  6.1.2. **testUpdateBook**: C·∫≠p nh·∫≠t th√¥ng tin s√°ch (v√≠ d·ª•: s·ªë trang, rating) v√† ƒë·∫£m b·∫£o `BookDao.update()` tr·∫£ v·ªÅ `true`.
*  6.1.3. **testDeleteBook**: X√≥a s√°ch theo `id` v√† x√°c minh `BookDao.delete()` tr·∫£ v·ªÅ `true`.

### 6.2. `BorrowServiceTest.java`

* **M·ª•c ƒë√≠ch**: ƒê·∫£m b·∫£o logic nghi·ªáp v·ª• m∆∞·ª£n/tr·∫£ s√°ch trong `BorrowService` v·∫≠n h√†nh ch√≠nh x√°c.
* **C√°c Test Case ch√≠nh**:

*  6.2.1. **testBorrowBookSuccess**: Khi s√°ch c√≥ t·ªìn t·∫°i, t·∫°o `BorrowRecord` m·ªõi v√† c·∫≠p nh·∫≠t map `borrowed` trong `Borrower`.
*  6.2.2. **testBorrowBookNonExistent**: Khi s√°ch kh√¥ng t·ªìn t·∫°i, n√©m exception ho·∫∑c tr·∫£ v·ªÅ `false`.
*  6.2.3. **testReturnBookSuccess**: C·∫≠p nh·∫≠t `returnDate` cho b·∫£n ghi v√† gi·∫£m ƒë√∫ng s·ªë l∆∞·ª£ng trong `borrowed`.
*  6.2.4. **testGetUnreturnedRecords**: L·∫•y danh s√°ch b·∫£n ghi ch∆∞a tr·∫£ c·ªßa m·ªôt `Borrower` v√† so s√°nh v·ªõi d·ªØ li·ªáu m·∫´u.

